# ЁЯФР рж╕рзНржЯрж╛ржл ржЗржорзЗржЗрж▓/ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб рж▓ржЧржЗржи рж╕рж┐рж╕рзНржЯрзЗржо

## тЬЕ рж╕ржорзНржкржирзНржи рж╣ржпрж╝рзЗржЫрзЗ

ржЖржкржирж╛рж░ Smart POS ржЕрзНржпрж╛ржкрзЗ ржПржЦржи **ржЗржорзЗржЗрж▓ ржПржмржВ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржнрж┐рждрзНрждрж┐ржХ рж╕рзНржЯрж╛ржл рж▓ржЧржЗржи рж╕рж┐рж╕рзНржЯрзЗржо** ржпрзЛржЧ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред

---

## ЁЯОп ржПржЗ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ рж╕рзБржмрж┐ржзрж╛

### рзз. **ржкрж╛рж░рзНрж╕рзЛржирж╛рж▓ ржЧрзБржЧрж▓ ржЖржЗржбрж┐ рж▓рж╛ржЧржмрзЗ ржирж╛**
- рж╕рзНржЯрж╛ржлржХрзЗ рждрж╛рж░ ржирж┐ржЬрзЗрж░ ржЧрзБржЧрж▓ ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯ ржжрзЛржХрж╛ржирзЗрж░ ржХржорзНржкрж┐ржЙржЯрж╛рж░рзЗ рж▓ржЧржЗржи ржХрж░рждрзЗ рж╣ржмрзЗ ржирж╛
- ржорж╛рж▓рж┐ржХ ржпрзЗржХрзЛржирзЛ ржЗржорзЗржЗрж▓ (ржпрзЗржоржи: `staff1@yourshop.com`) ржПржмржВ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржжрж┐ржпрж╝рзЗ рж╕рзНржЯрж╛ржл рждрзИрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржи

### рзи. **ржорж╛рж▓рж┐ржХрзЗрж░ ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯ ржирж┐рж░рж╛ржкржж**
- рж╕рзНржЯрж╛ржл ржЕрзНржпрж╛ржб ржХрж░рж╛рж░ рж╕ржоржпрж╝ ржорж╛рж▓рж┐ржХ рж▓ржЧржЖржЙржЯ рж╣ржмрзЗржи ржирж╛
- Secondary Firebase App ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ ржПржЗ рж╕ржорж╕рзНржпрж╛ ржПржбрж╝рж╛рждрзЗ

### рзй. **рж╢рзЗржпрж╝рж╛рж░рзНржб ржХржорзНржкрж┐ржЙржЯрж╛рж░ ржлрзНрж░рзЗржирзНржбрж▓рж┐**
- ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ ржЧрзБржЧрж▓ ржЖржЗржбрж┐ рж╕рзЗржн ржерж╛ржХрж╛рж░ ржЭрж╛ржорзЗрж▓рж╛ ржирзЗржЗ
- ржХрж╛ржЬ рж╢рзЗрж╖рзЗ рж╕рзНржЯрж╛ржл рж╢рзБржзрзБ 'Logout' ржмрж╛ржЯржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рж▓рзЗржЗ рж╣ржмрзЗ

---

## ЁЯУЛ ржХрзАржнрж╛ржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи

### **ржорж╛рж▓рж┐ржХрзЗрж░ ржЬржирзНржп (рж╕рзНржЯрж╛ржл ржЕрзНржпрж╛ржб ржХрж░рж╛)**

1. **Staff Management** ржкрзЗржЬрзЗ ржпрж╛ржи
2. ржирж┐ржЪрзЗрж░ рждржерзНржп ржжрж┐ржпрж╝рзЗ ржлрж░рзНржо ржкрзВрж░ржг ржХрж░рзБржи:
   - **Staff Name**: рж╕рзНржЯрж╛ржлрзЗрж░ ржирж╛ржо
   - **Staff Email**: ржпрзЗржХрзЛржирзЛ ржЗржорзЗржЗрж▓ (ржпрзЗржоржи: `cashier1@myshop.com`)
   - **Set Password**: рзм ржЕржХрзНрж╖рж░рзЗрж░ ржмрзЗрж╢рж┐ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб
   - **Role**: Cashier ржЕржержмрж╛ Manager
3. **Add Staff** ржмрж╛ржЯржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзБржи
4. рж╕рзНржЯрж╛ржлржХрзЗ ржЗржорзЗржЗрж▓ ржПржмржВ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржжрж┐ржпрж╝рзЗ ржжрж┐ржи

### **рж╕рзНржЯрж╛ржлрзЗрж░ ржЬржирзНржп (рж▓ржЧржЗржи ржХрж░рж╛)**

1. рж▓ржЧржЗржи ржкрзЗржЬрзЗ ржпрж╛ржи (`index.html`)
2. **"OR Staff Login"** рж╕рзЗржХрж╢ржирзЗ:
   - **Staff Email** рж▓рж┐ржЦрзБржи
   - **Password** рж▓рж┐ржЦрзБржи
3. **Login as Staff** ржмрж╛ржЯржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзБржи
4. рж╕ржлрж▓ржнрж╛ржмрзЗ рж▓ржЧржЗржи рж╣рж▓рзЗ ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржбрзЗ ржЪрж▓рзЗ ржпрж╛ржмрзЗржи

---

## ЁЯФз ржЯрзЗржХржирж┐ржХрзНржпрж╛рж▓ ржмрж┐ржмрж░ржг

### **ржкрж░рж┐ржмрж░рзНрждрж┐ржд ржлрж╛ржЗрж▓рж╕ржорзВрж╣:**

#### рзз. `staff-management/index.html`
- рж╕рзНржЯрж╛ржл ржЕрзНржпрж╛ржб ржлрж░рзНржорзЗ **Password** ржлрж┐рж▓рзНржб ржпрзЛржЧ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ

#### рзи. `staff-management/staff.js`
- **Secondary Firebase App** рждрзИрж░рж┐ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ
- `createUserWithEmailAndPassword()` ржлрж╛ржВрж╢ржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ рж╕рзНржЯрж╛ржл рж░рзЗржЬрж┐рж╕рзНржЯрзНрж░рзЗрж╢ржи
- ржорж╛рж▓рж┐ржХ рж▓ржЧржЖржЙржЯ рж╣ржмрзЗржи ржирж╛ ржПржЗ ржирж┐рж╢рзНржЪржпрж╝рждрж╛

#### рзй. `index.html` (Login Page)
- ржЧрзБржЧрж▓ рж▓ржЧржЗржи ржмрж╛ржЯржирзЗрж░ ржирж┐ржЪрзЗ **Staff Login Form** ржпрзЛржЧ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ
- ржЗржорзЗржЗрж▓ ржПржмржВ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржЗржиржкрзБржЯ ржлрж┐рж▓рзНржб

#### рзк. `js/auth.js`
- `signInWithEmailAndPassword()` ржлрж╛ржВрж╢ржи ржЗржорзНржкрзЛрж░рзНржЯ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ
- **Staff Login Form Handler** ржпрзЛржЧ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ
- рж▓ржЧржЗржи рж╕ржлрж▓ рж╣рж▓рзЗ рж╕рзНржЯрж╛ржлрзЗрж░ рж░рзЛрж▓ ржПржмржВ рж╢ржк ржЖржЗржбрж┐ рж╕рзЗржЯ ржХрж░рж╛ рж╣ржпрж╝

#### рзл. `js/firebase-config.js`
- `app` ржПржмржВ `firebaseConfig` ржПржХрзНрж╕ржкрзЛрж░рзНржЯ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ
- ржпрж╛рждрзЗ `staff.js` ржП Secondary App рждрзИрж░рж┐ ржХрж░рж╛ ржпрж╛ржпрж╝

---

## ЁЯЧДя╕П ржбрзЗржЯрж╛ржмрзЗрж╕ рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░

### **Firebase Authentication**
```
Users (Auth)
тФЬтФАтФА owner@gmail.com (Google Sign-in)
тФЬтФАтФА staff1@myshop.com (Email/Password)
тФФтФАтФА staff2@myshop.com (Email/Password)
```

### **Firestore Collections**

#### `shops/{ownerId}/staffs/{staffEmail}`
```json
{
  "uid": "firebase_auth_uid",
  "name": "John Doe",
  "email": "staff1@myshop.com",
  "role": "cashier",
  "addedAt": "2025-01-15T10:30:00Z"
}
```

#### `staff_mapping/{email_with_underscore}`
```json
{
  "shopId": "owner_uid",
  "role": "cashier",
  "uid": "staff_firebase_uid"
}
```

---

## ЁЯФР ржирж┐рж░рж╛ржкрждрзНрждрж╛ ржЯрж┐ржкрж╕

### рзз. **рж╢ржХрзНрждрж┐рж╢рж╛рж▓рзА ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи**
- ржХржоржкржХрзНрж╖рзЗ рзо-рззрзж ржЕржХрзНрж╖рж░
- ржЕржХрзНрж╖рж░, рж╕ржВржЦрзНржпрж╛ ржПржмржВ ржмрж┐рж╢рзЗрж╖ ржЪрж┐рж╣рзНржи ржорж┐рж╢рзНрж░рж┐ржд

### рзи. **рж╕рзНржЯрж╛ржл рж░рж┐ржорзБржн ржХрж░рж╛рж░ ржкрж░**
- Firebase Console ржерзЗржХрзЗ ржорзНржпрж╛ржирзБржпрж╝рж╛рж▓рж┐ ржЗржЙржЬрж╛рж░ ржбрж┐рж▓рж┐ржЯ ржХрж░рзБржи (ржРржЪрзНржЫрж┐ржХ)
- ржЕржержмрж╛ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзЗ ржжрж┐ржи

### рзй. **Firestore Security Rules**
```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // рж╢рзБржзрзБржорж╛рждрзНрж░ ржорж╛рж▓рж┐ржХ рждрж╛рж░ рж╕рзНржЯрж╛ржл ржорзНржпрж╛ржирзЗржЬ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржи
    match /shops/{shopId}/staffs/{staffEmail} {
      allow read, write: if request.auth.uid == shopId;
    }
    
    // рж╕рзНржЯрж╛ржл ржорзНржпрж╛ржкрж┐ржВ рж╢рзБржзрзБ ржкржбрж╝рж╛ ржпрж╛ржмрзЗ
    match /staff_mapping/{mappingId} {
      allow read: if request.auth != null;
      allow write: if false; // рж╢рзБржзрзБ ржЕрзНржпрж╛ржбржорж┐ржи/ржорж╛рж▓рж┐ржХ
    }
  }
}
```

---

## ЁЯзк ржЯрзЗрж╕рзНржЯрж┐ржВ ржЪрзЗржХрж▓рж┐рж╕рзНржЯ

- [ ] ржорж╛рж▓рж┐ржХ ржЧрзБржЧрж▓ ржжрж┐ржпрж╝рзЗ рж▓ржЧржЗржи ржХрж░рждрзЗ ржкрж╛рж░ржЫрзЗржи
- [ ] ржорж╛рж▓рж┐ржХ рж╕рзНржЯрж╛ржл ржЕрзНржпрж╛ржб ржХрж░рждрзЗ ржкрж╛рж░ржЫрзЗржи (ржЗржорзЗржЗрж▓/ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржжрж┐ржпрж╝рзЗ)
- [ ] рж╕рзНржЯрж╛ржл ржЕрзНржпрж╛ржб ржХрж░рж╛рж░ ржкрж░ ржорж╛рж▓рж┐ржХ рж▓ржЧржЖржЙржЯ рж╣ржЪрзНржЫрзЗржи ржирж╛
- [ ] рж╕рзНржЯрж╛ржл ржЗржорзЗржЗрж▓/ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржжрж┐ржпрж╝рзЗ рж▓ржЧржЗржи ржХрж░рждрзЗ ржкрж╛рж░ржЫрзЗржи
- [ ] рж╕рзНржЯрж╛ржл рж▓ржЧржЗржи ржХрж░рж╛рж░ ржкрж░ рж╕ржарж┐ржХ рж░рзЛрж▓ (cashier/manager) рж╕рзЗржЯ рж╣ржЪрзНржЫрзЗ
- [ ] рж╕рзНржЯрж╛ржл рж▓ржЧржЖржЙржЯ ржХрж░рждрзЗ ржкрж╛рж░ржЫрзЗржи
- [ ] ржнрзБрж▓ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржжрж┐рж▓рзЗ ржПрж░рж░ ржорзЗрж╕рзЗржЬ ржжрзЗржЦрж╛ржЪрзНржЫрзЗ

---

## ЁЯЪА ржкрж░ржмрж░рзНрждрзА ржЙржирзНржирждрж┐ (ржРржЪрзНржЫрж┐ржХ)

1. **ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб рж░рж┐рж╕рзЗржЯ ржлрж┐ржЪрж╛рж░**
   - Firebase `sendPasswordResetEmail()` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи

2. **рж╕рзНржЯрж╛ржл ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржкрж░рж┐ржмрж░рзНрждржи**
   - ржорж╛рж▓рж┐ржХ рж╕рзНржЯрж╛ржлрзЗрж░ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб рж░рж┐рж╕рзЗржЯ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржи

3. **рж╕рзНржЯрж╛ржл ржЕрзНржпрж╛ржХрзНржЯрж┐ржнрж┐ржЯрж┐ рж▓ржЧ**
   - ржХрзЗ ржХржЦржи рж▓ржЧржЗржи/рж▓ржЧржЖржЙржЯ ржХрж░рзЗржЫрзЗ рждрж╛ ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рж╛

4. **ржорж╛рж▓рзНржЯрж┐-ржлрзНржпрж╛ржХрзНржЯрж░ ржЕржерзЗржирзНржЯрж┐ржХрзЗрж╢ржи (MFA)**
   - ржЖрж░ржУ ржмрзЗрж╢рж┐ ржирж┐рж░рж╛ржкрждрзНрждрж╛рж░ ржЬржирзНржп

---

## тЭУ рж╕ржорж╕рзНржпрж╛ рж╕ржорж╛ржзрж╛ржи

### **рж╕ржорж╕рзНржпрж╛: "Email already in use"**
**рж╕ржорж╛ржзрж╛ржи:** ржПржЗ ржЗржорзЗржЗрж▓ ржжрж┐ржпрж╝рзЗ ржЖржЧрзЗ рж╕рзНржЯрж╛ржл рждрзИрж░рж┐ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред ржирждрзБржи ржЗржорзЗржЗрж▓ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред

### **рж╕ржорж╕рзНржпрж╛: "Password should be at least 6 characters"**
**рж╕ржорж╛ржзрж╛ржи:** рзм ржЕржХрзНрж╖рж░рзЗрж░ ржмрзЗрж╢рж┐ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржжрж┐ржиред

### **рж╕ржорж╕рзНржпрж╛: рж╕рзНржЯрж╛ржл рж▓ржЧржЗржи ржХрж░рждрзЗ ржкрж╛рж░ржЫрзЗ ржирж╛**
**рж╕ржорж╛ржзрж╛ржи:** 
1. ржЗржорзЗржЗрж▓ ржПржмржВ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб рж╕ржарж┐ржХ ржЖржЫрзЗ ржХрж┐ржирж╛ ржЪрзЗржХ ржХрж░рзБржи
2. `staff_mapping` ржХрж╛рж▓рзЗржХрж╢ржирзЗ ржбрзЗржЯрж╛ ржЖржЫрзЗ ржХрж┐ржирж╛ ржжрзЗржЦрзБржи
3. Browser Console-ржП ржПрж░рж░ ржорзЗрж╕рзЗржЬ ржЪрзЗржХ ржХрж░рзБржи

---

## ЁЯУЮ рж╕рж╛ржкрзЛрж░рзНржЯ

ржХрзЛржирзЛ рж╕ржорж╕рзНржпрж╛ рж╣рж▓рзЗ ржмрж╛ ржкрзНрж░рж╢рзНржи ржерж╛ржХрж▓рзЗ ржЬрж╛ржирж╛ржиред ржЖржорж┐ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рждрзЗ ржкрзНрж░рж╕рзНрждрзБржд! ЁЯШК

---

**рждрзИрж░рж┐ ржХрж░рзЗржЫрзЗржи:** Amazon Q Developer  
**рждрж╛рж░рж┐ржЦ:** рзирзжрзирзл-рзжрзз-рззрзл
